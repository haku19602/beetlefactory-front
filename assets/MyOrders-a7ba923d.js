import{X as p,x as _,A as f,a0 as y,a1 as h,a2 as b,c as r,a4 as t,ad as V,aa as i,ac as n,aq as k,J as g,a9 as x}from"./index-7fe67b54.js";import{V as v}from"./VContainer-5a48f817.js";import{V as C}from"./VRow-4336aeea.js";import{V as c}from"./VCol-f74ed9fd.js";import{V as A}from"./VDataTable-d00e0996.js";import{V as w}from"./VChip-63b82233.js";import"./VSelect-429a9236.js";import"./VList-4c1275af.js";import"./VDivider-35d85a57.js";const B={style:{height:"100%"},class:"bg-back"},D=x("h2",{class:"text-center mt-5 text-primary"},"我的訂單",-1),O={__name:"MyOrders",setup(L){const{apiAuth:d}=V(),u=p(),l=_([]),m=[{title:"訂單編號",sortable:!0,key:"_id"},{title:"訂購日期",sortable:!0,key:"createdAt"},{title:"訂單金額",key:"price",align:"center",value:o=>{const s=o.cart.reduce((a,e)=>a+e.quantity*e.product.price,0);return o.delivery==="黑貓"?s+110:o.delivery==="7-11 交貨便"?s+70:s}},{title:"付款狀態",sortable:!0,key:"paid",align:"center"},{title:"完成訂單",sortable:!0,key:"done",align:"center"}];return f(async()=>{var o,s;try{const{data:a}=await d.get("/orders");l.value.push(...a.result)}catch(a){const e=((s=(o=a==null?void 0:a.response)==null?void 0:o.data)==null?void 0:s.message)||"發生錯誤，請稍後再試";u({text:e,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"secondary",location:"bottom"}})}}),(o,s)=>{const a=y("RouterLink");return h(),b("div",B,[r(v,null,{default:t(()=>[r(C,null,{default:t(()=>[r(c,null,{default:t(()=>[D]),_:1}),r(c,{cols:"12"},{default:t(()=>[r(A,{items:l.value,headers:m,"items-per-page":5,class:"bg-back"},{"item._id":t(({item:e})=>[r(a,{to:"/orders/"+e._id,class:"text-primary"},{default:t(()=>[i(n(e._id),1)]),_:2},1032,["to"])]),"item.createdAt":t(({item:e})=>[i(n(new Date(e.createdAt).toLocaleString("zh-TW",{hour12:!1,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})),1)]),"item.paid":t(({item:e})=>[r(w,{variant:"outlined",class:k(e.paid?["text-primary"]:["text-error"])},{default:t(()=>[i(n(e.paid?"付款確認":"尚未付款"),1)]),_:2},1032,["class"])]),"item.done":t(({item:e})=>[r(g,{color:"primary",variant:"flat",rounded:"",disabled:e.done||!e.paid},{default:t(()=>[i(" 完成訂單 ")]),_:2},1032,["disabled"])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1})])}}};export{O as default};
