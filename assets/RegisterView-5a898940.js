import{L as $,K as B,r as V,Q as M,S as T,T as l,a3 as U,h as s,a6 as q,a7 as F,$ as b,a8 as _,Y as a,a9 as R,aa as u,V as E}from"./index-724c5dd8.js";import{v as N}from"./index-8639c00b.js";import{c as P,a as d,b as A,u as K,d as m,V as L}from"./index.esm-8b373f45.js";import{V as O}from"./VContainer-a3e58365.js";import{V as Q,a as Y}from"./VRow-48d9a503.js";const J={__name:"RegisterView",setup(j){const{api:w}=U(),x=$(),g=B(),n=V(!1),r=V(!1),y=P({account:d().required("使用者帳號必填").min(4,"帳號名稱最少 4 字").max(20,"帳號名稱最多 20 字"),email:d().required("使用者信箱必填").test("isEmail","信箱格式錯誤",t=>N.isEmail(t)),password:d().required("使用者密碼必填").min(4,"密碼最少 4 字").max(20,"密碼最多 20 字"),passwordConfirm:d().required("使用者密碼必填").min(4,"密碼最少 4 字").max(20,"密碼最多 20 字").oneOf([A("password")],"密碼不一致")}),{handleSubmit:h,isSubmitting:C}=K({validationSchema:y}),p=m("account"),c=m("email"),v=m("password"),f=m("passwordConfirm"),k=h(async t=>{var e,o;try{await w.post("/users",{account:t.account,email:t.email,password:t.password}),g({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"back",location:"bottom"}}),x.push("/login")}catch(i){console.log(i);const S=((o=(e=i==null?void 0:i.response)==null?void 0:e.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";g({text:S,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"secondary",location:"bottom"}})}});return(t,e)=>(M(),T(O,{class:"d-flex align-center",style:{height:"90%"}},{default:l(()=>[s(Y,null,{default:l(()=>[s(Q,{cols:"12",md:"6","offset-md":"3"},{default:l(()=>[s(q,{class:"mx-auto pa-8 pb-8 bg-back",elevation:"8","max-width":"448",rounded:"xl","align-self":"center"},{default:l(()=>[s(F,{class:"pb-5"},{default:l(()=>[b("註冊")]),_:1}),s(_,null,{default:l(()=>[s(L,{disabled:a(C),onSubmit:R(a(k),["prevent"])},{default:l(()=>[s(u,{class:"pb-3",label:"信箱",placeholder:"aaaa@gmail.com",density:"compact",variant:"outlined",type:"email","prepend-inner-icon":"mdi-email-outline",modelValue:a(c).value.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a(c).value.value=o),"error-messages":a(c).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{class:"pb-3",label:"帳號",placeholder:"User name",hint:"4~20字 英文或數字",density:"compact",variant:"outlined",minlength:"4",maxlength:"20",counter:"","prepend-inner-icon":"mdi-account-outline",modelValue:a(p).value.value,"onUpdate:modelValue":e[1]||(e[1]=o=>a(p).value.value=o),"error-messages":a(p).errorMessage.value},null,8,["modelValue","error-messages"]),s(u,{class:"pb-3",label:"密碼",placeholder:"請輸入密碼",hint:"4~20字",density:"compact",variant:"outlined",minlength:"4",maxlength:"20",counter:"",type:n.value?"text":"password","prepend-inner-icon":"mdi-lock-outline","append-icon":n.value?"mdi-eye-off":"mdi-eye","onClick:append":e[2]||(e[2]=o=>n.value=!n.value),modelValue:a(v).value.value,"onUpdate:modelValue":e[3]||(e[3]=o=>a(v).value.value=o),"error-messages":a(v).errorMessage.value},null,8,["type","append-icon","modelValue","error-messages"]),s(u,{class:"pb-3",label:"確認密碼",placeholder:"請再次輸入密碼",hint:"4~20字",density:"compact",variant:"outlined",minlength:"4",maxlength:"20",counter:"",type:r.value?"text":"password","prepend-inner-icon":"mdi-lock-outline","append-icon":r.value?"mdi-eye-off":"mdi-eye","onClick:append":e[4]||(e[4]=o=>r.value=!r.value),modelValue:a(f).value.value,"onUpdate:modelValue":e[5]||(e[5]=o=>a(f).value.value=o),"error-messages":a(f).errorMessage.value},null,8,["type","append-icon","modelValue","error-messages"]),s(E,{type:"submit",color:"secondary",rounded:"xl"},{default:l(()=>[b("Sign up")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{J as default};
