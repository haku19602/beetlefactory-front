import{p as U,r as Y,s as C,c as f,a as G,w as R,o as J,b as K,m as Q,g as D,u as Z,d as ee,e as te,t as M,f as H,h as o,i as P,j as oe,k as ae,V as L,I as le,l as ne,n as se,q as re,v as ue,x as ce,y as ie,z as de,A as ve,B as me,C as ge,D as fe,E as pe,F as be,M as he,G as ye,H as ke,J as I,_ as Ve,K as _e,L as Se,N as xe,O as Be,P as we,Q as a,R as d,S as h,T as s,U as k,W as v,X as w,Y as $,Z as Te,$ as B,a0 as Ce,a1 as q,a2 as T,a3 as Le}from"./index-724c5dd8.js";import{V as Ie,a as Pe}from"./VNavigationDrawer-2e65b39b.js";import{m as Ne,V as O,a as Ae,b as Re}from"./VToolbar-21024eb5.js";import{u as $e,V as E,a as F,b as Ee}from"./VList-45b21e71.js";import{V as W}from"./VDivider-077b5e61.js";import{V as Fe}from"./VContainer-a3e58365.js";const Me=U({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ue(e){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:i}=m;let V=0;const l=Y(null),n=C(0),y=C(0),p=C(0),_=C(!1),S=C(!1),u=f(()=>Number(e.scrollThreshold)),x=f(()=>G((u.value-n.value)/u.value||0)),b=()=>{const r=l.value;!r||i&&!i.value||(V=n.value,n.value="window"in r?r.pageYOffset:r.scrollTop,S.value=n.value<V,p.value=Math.abs(n.value-u.value))};return R(S,()=>{y.value=y.value||n.value}),R(_,()=>{y.value=0}),J(()=>{R(()=>e.scrollTarget,r=>{var t;const g=r?document.querySelector(r):window;g&&g!==l.value&&((t=l.value)==null||t.removeEventListener("scroll",b),l.value=g,l.value.addEventListener("scroll",b,{passive:!0}))},{immediate:!0})}),K(()=>{var r;(r=l.value)==null||r.removeEventListener("scroll",b)}),i&&R(i,b,{immediate:!0}),{scrollThreshold:u,currentScroll:n,currentThreshold:p,isScrollActive:_,scrollRatio:x,isScrollingUp:S,savedScroll:y}}const De=U({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Ne(),...Q(),...Me(),height:{type:[Number,String],default:64}},"VAppBar"),He=D()({name:"VAppBar",props:De(),emits:{"update:modelValue":e=>!0},setup(e,m){let{slots:i}=m;const V=Y(),l=Z(e,"modelValue"),n=f(()=>{var A;const c=new Set(((A=e.scrollBehavior)==null?void 0:A.split(" "))??[]);return{hide:c.has("hide"),inverted:c.has("inverted"),collapse:c.has("collapse"),elevate:c.has("elevate"),fadeImage:c.has("fade-image")}}),y=f(()=>{const c=n.value;return c.hide||c.inverted||c.collapse||c.elevate||c.fadeImage||!l.value}),{currentScroll:p,scrollThreshold:_,isScrollingUp:S,scrollRatio:u}=Ue(e,{canScroll:y}),x=f(()=>e.collapse||n.value.collapse&&(n.value.inverted?u.value>0:u.value===0)),b=f(()=>e.flat||n.value.elevate&&(n.value.inverted?p.value>0:p.value===0)),r=f(()=>n.value.fadeImage?n.value.inverted?1-u.value:u.value:void 0),g=f(()=>{var z,X;if(n.value.hide&&n.value.inverted)return 0;const c=((z=V.value)==null?void 0:z.contentHeight)??0,A=((X=V.value)==null?void 0:X.extensionHeight)??0;return c+A});ee(f(()=>!!e.scrollBehavior),()=>{oe(()=>{n.value.hide?n.value.inverted?l.value=p.value>_.value:l.value=S.value||p.value<_.value:l.value=!0})});const{ssrBootStyles:t}=$e(),{layoutItemStyles:N}=te({id:e.name,order:f(()=>parseInt(e.order,10)),position:M(e,"location"),layoutSize:g,elementSize:C(void 0),active:l,absolute:M(e,"absolute")});return H(()=>{const c=O.filterProps(e);return o(O,P({ref:V,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...N.value,"--v-toolbar-image-opacity":r.value,height:void 0,...t.value},e.style]},c,{collapse:x.value,flat:b.value}),i)}),{}}}),Ye=U({...ae({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),ze=D()({name:"VAppBarNavIcon",props:Ye(),setup(e,m){let{slots:i}=m;return H(()=>o(L,P(e,{class:["v-app-bar-nav-icon"]}),i)),{}}}),Xe=D()({name:"VAppBarTitle",props:Ae(),setup(e,m){let{slots:i}=m;return H(()=>o(Re,P(e,{class:"v-app-bar-title"}),i)),{}}});const qe=U({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:le,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...ne(),...se({location:"top end"}),...re(),...ue(),...ce(),...ie({transition:"scale-rotate-transition"})},"VBadge"),j=D()({name:"VBadge",inheritAttrs:!1,props:qe(),setup(e,m){const{backgroundColorClasses:i,backgroundColorStyles:V}=de(M(e,"color")),{roundedClasses:l}=ve(e),{t:n}=me(),{textColorClasses:y,textColorStyles:p}=ge(M(e,"textColor")),{themeClasses:_}=fe(),{locationStyles:S}=pe(e,!0,u=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(u)?+(e.offsetY??0):["left","right"].includes(u)?+(e.offsetX??0):0));return H(()=>{const u=Number(e.content),x=!e.max||isNaN(u)?e.content:u<=+e.max?u:`${e.max}+`,[b,r]=be(m.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return o(e.tag,P({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},r,{style:e.style}),{default:()=>{var g,t;return[o("div",{class:"v-badge__wrapper"},[(t=(g=m.slots).default)==null?void 0:t.call(g),o(he,{transition:e.transition},{default:()=>{var N,c;return[ye(o("span",P({class:["v-badge__badge",_.value,i.value,l.value,y.value],style:[V.value,p.value,e.inline?{}:S.value],"aria-atomic":"true","aria-label":n(e.label,u),"aria-live":"polite",role:"status"},b),[e.dot?void 0:m.slots.badge?(c=(N=m.slots).badge)==null?void 0:c.call(N):e.icon?o(I,{icon:e.icon},null):x]),[[ke,e.modelValue]])]}})])]}})}),{}}}),Oe=""+new URL("logo_home-422bc9b0.png",import.meta.url).href;const We={__name:"FrontLayout",setup(e){const{apiAuth:m}=Le(),i=_e(),V=Se(),l=xe(),{mobile:n}=Be(),y=f(()=>n.value),p=Y(!1),_=f(()=>[{to:"/book",text:"飼養攻略",icon:"mdi-book-open-variant",show:!0},{to:"/shop",text:"商店",icon:"mdi-shopping",show:!0}]),S=f(()=>[{to:"/cart",text:"購物車",icon:"mdi-cart",show:l.isLogin},{to:"/my",text:"我的",icon:"mdi-account",show:l.isLogin},{to:"/admin",text:"管理員",icon:"mdi-cog",show:l.isLogin&&l.isAdmin}]),u=f(()=>[{to:"/login",text:"登入",icon:"mdi-login",show:!l.isLogin},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!l.isLogin}]),x=async()=>{var b,r;try{await m.delete("/users/logout"),l.logout(),i({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"back",location:"bottom"}}),V.push("/")}catch(g){const t=((r=(b=g==null?void 0:g.response)==null?void 0:b.data)==null?void 0:r.message)||"發生錯誤，請稍後再試";i({text:t,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"secondary",location:"bottom"}})}};return(b,r)=>{const g=we("RouterView");return a(),d(v,null,[y.value?(a(),h(Ie,{key:0,modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=t=>p.value=t),temporary:"",location:"right",color:"primary",class:"pa-3"},{default:s(()=>[o(Ee,{nav:""},{default:s(()=>[(a(!0),d(v,null,w(_.value,t=>(a(),d(v,{key:t.to},[t.show?(a(),h(E,{key:0,to:t.to,rounded:"xl"},{prepend:s(()=>[o(I,{icon:t.icon},null,8,["icon"])]),default:s(()=>[o(F,null,{default:s(()=>[B(T(t.text),1)]),_:2},1024)]),_:2},1032,["to"])):k("",!0)],64))),128)),o(W,{class:"my-3"}),(a(!0),d(v,null,w(S.value,t=>(a(),d(v,{key:t.to},[t.show?(a(),h(E,{key:0,to:t.to,rounded:"xl"},{prepend:s(()=>[o(I,{icon:t.icon},null,8,["icon"])]),append:s(()=>[t.to==="/cart"?(a(),h(j,{key:0,color:"secondary",content:$(l).cart,inline:""},null,8,["content"])):k("",!0)]),default:s(()=>[o(F,null,{default:s(()=>[B(T(t.text),1)]),_:2},1024)]),_:2},1032,["to"])):k("",!0)],64))),128)),(a(!0),d(v,null,w(u.value,t=>(a(),d(v,{key:t.to},[t.show?(a(),h(E,{key:0,to:t.to,rounded:"xl"},{prepend:s(()=>[o(I,{icon:t.icon},null,8,["icon"])]),default:s(()=>[o(F,null,{default:s(()=>[B(T(t.text),1)]),_:2},1024)]),_:2},1032,["to"])):k("",!0)],64))),128)),o(W,{class:"my-3"}),$(l).isLogin?(a(),h(E,{key:0,rounded:"xl",onClick:x},{default:s(()=>[Te("template",null,[o(I,{icon:"mdi-logout"})]),o(F,null,{default:s(()=>[B("登出")]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1},8,["modelValue"])):k("",!0),o(He,{color:"primary",elevation:"0"},{default:s(()=>[o(Fe,{class:"d-flex align-center"},{default:s(()=>[o(L,{to:"/",active:!1,color:"back",class:"logo"},{default:s(()=>[o(Xe,null,{default:s(()=>[o(Ce,{src:Oe,alt:"甲蟲工廠 | 首頁",width:"75px"})]),_:1})]),_:1}),y.value?(a(),d(v,{key:0},[o(q),o(ze,{color:"back",onClick:r[1]||(r[1]=t=>p.value=!0)})],64)):(a(),d(v,{key:1},[(a(!0),d(v,null,w(_.value,t=>(a(),d(v,{key:t.to},[t.show?(a(),h(L,{key:0,to:t.to,"prepend-icon":t.icon,rounded:"xl"},{default:s(()=>[B(T(t.text),1)]),_:2},1032,["to","prepend-icon"])):k("",!0)],64))),128)),o(q),(a(!0),d(v,null,w(S.value,t=>(a(),d(v,{key:t.to},[t.show?(a(),h(L,{key:0,to:t.to,"prepend-icon":t.icon,rounded:"xl"},{default:s(()=>[B(T(t.text)+" ",1),t.to==="/cart"?(a(),h(j,{key:0,color:"secondary",content:$(l).cart,floating:""},null,8,["content"])):k("",!0)]),_:2},1032,["to","prepend-icon"])):k("",!0)],64))),128)),(a(!0),d(v,null,w(u.value,t=>(a(),d(v,{key:t.to},[t.show?(a(),h(L,{key:0,to:t.to,"prepend-icon":t.icon,color:"warning",rounded:"xl",variant:"outlined",class:"sign"},{default:s(()=>[B(T(t.text),1)]),_:2},1032,["to","prepend-icon"])):k("",!0)],64))),128)),$(l).isLogin?(a(),h(L,{key:0,"prepend-icon":"mdi-logout",color:"warning",rounded:"xl",variant:"outlined",class:"sign",onClick:x},{default:s(()=>[B("登出")]),_:1})):k("",!0)],64))]),_:1})]),_:1}),o(Pe,null,{default:s(()=>[(a(),h(g,{key:b.$route.path}))]),_:1})],64)}}},et=Ve(We,[["__scopeId","data-v-061b6bfb"]]);export{et as default};
